{"ast":null,"code":"import actions from \"../actions/profile.actions\";\nimport axios from 'axios';\nimport { NOTIFICATION_TYPES, openNotification } from \"../../Components/Notifications/notifications\";\nimport { Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\n\nconst profileFunctions = dispatch => {\n  const logout = () => {\n    dispatch(actions.logout());\n  };\n\n  const login = async (email, password) => {\n    var _s = $RefreshSig$();\n\n    var url = 'http://127.0.0.1:8080/login/?username=' + email + '&password=' + password;\n    axios.get(url, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(_s(response => {\n      _s();\n\n      const token = response.data.token;\n\n      if (response.status === 200) {\n        console.log(response);\n        openNotification('LOGIN', \"Autentificarea s-a realizat cu succes\", NOTIFICATION_TYPES.SUCCESS);\n        dispatch(actions.authenticate(token));\n        const history = useHistory();\n        history.push('/login');\n      } else {\n        openNotification('LOGIN', \"Email sau parola gresita!\", NOTIFICATION_TYPES.ERROR);\n      }\n    }, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n      return [useHistory];\n    }));\n  };\n\n  const signup = async (nume, pass, email, firstname, lastname, organizatie) => {\n    var url = 'http://127.0.0.1:8080/users/createUser/?username=' + nume + '&password=' + pass + '&email=' + email + '&firstname=' + firstname + '&lastname=' + lastname + '&organizationId=' + organizatie;\n    axios.post(url, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(response => {\n      console.log(response);\n      const token = response.data.token;\n      openNotification('SIGNUP', \"Inregistrarea s-a realizat cu succes\", NOTIFICATION_TYPES.SUCCESS);\n      dispatch(actions.signup(token));\n    }).catch(e => {\n      openNotification('SIGNUP', \"Contul exista deja / Nu a putut fi inregistrat contul!\", NOTIFICATION_TYPES.ERROR);\n    });\n  };\n\n  const getSession = () => {\n    dispatch(actions.getSession());\n  };\n\n  const changePage = page => {\n    dispatch(actions.changeTab(page));\n  };\n\n  const getCurrentPage = () => {\n    dispatch(actions.getActivePage);\n  };\n\n  return {\n    logout,\n    login,\n    signup,\n    getSession,\n    changePage,\n    getCurrentPage\n  };\n};\n\nexport default profileFunctions;","map":{"version":3,"sources":["C:/Users/Stefan/Desktop/FrontEnd/ip-frontend/src/Context/functions/profile.functions.js"],"names":["actions","axios","NOTIFICATION_TYPES","openNotification","Redirect","useHistory","profileFunctions","dispatch","logout","login","email","password","url","get","headers","then","response","token","data","status","console","log","SUCCESS","authenticate","history","push","ERROR","signup","nume","pass","firstname","lastname","organizatie","post","catch","e","getSession","changePage","page","changeTab","getCurrentPage","getActivePage"],"mappings":"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","sourcesContent":["import actions from \"../actions/profile.actions\";\nimport axios from 'axios';\nimport {NOTIFICATION_TYPES, openNotification} from \"../../Components/Notifications/notifications\";\nimport {Redirect} from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\n\nconst profileFunctions = dispatch => {\n   \n    const logout = () => {\n        dispatch(actions.logout());\n    };\n    const login = async (email, password) => {\n        var url = 'http://127.0.0.1:8080/login/?username=' + email + '&password=' + password\n        axios.get(url, {\n            headers: {\"Access-Control-Allow-Origin\": \"*\"}\n        }).then(response => {\n            const token = response.data.token;\n            if (response.status === 200) {\n                console.log(response)\n                openNotification('LOGIN', \"Autentificarea s-a realizat cu succes\", NOTIFICATION_TYPES.SUCCESS);\n                dispatch(actions.authenticate(token))\n                const history = useHistory();\n                history.push('/login')\n            }\n            else {\n                openNotification('LOGIN', \"Email sau parola gresita!\", NOTIFICATION_TYPES.ERROR);\n            }\n        });\n    };\n    const signup = async (nume, pass, email, firstname, lastname, organizatie) => {\n        var url = 'http://127.0.0.1:8080/users/createUser/?username=' + nume + '&password=' + pass +\n        '&email=' + email + '&firstname=' + firstname + '&lastname=' + lastname + '&organizationId=' + organizatie\n        axios.post(url, {\n            headers: {\"Access-Control-Allow-Origin\": \"*\"}\n        }).then(response => {\n            console.log(response)\n            const token = response.data.token;\n            openNotification('SIGNUP', \"Inregistrarea s-a realizat cu succes\", NOTIFICATION_TYPES.SUCCESS);\n            dispatch(actions.signup(token))\n        }).catch(e => {\n            openNotification('SIGNUP', \"Contul exista deja / Nu a putut fi inregistrat contul!\", NOTIFICATION_TYPES.ERROR);\n        });\n    };\n\n    const getSession = () => {\n        dispatch(actions.getSession());\n    };\n    const changePage = page => {\n        dispatch(actions.changeTab(page));\n    };\n    const getCurrentPage = () => {\n        dispatch(actions.getActivePage);\n    };\n    return {\n        logout,\n        login,\n        signup,\n        getSession,\n        changePage,\n        getCurrentPage\n    };\n};\n\nexport default profileFunctions;\n"]},"metadata":{},"sourceType":"module"}